<!DOCTYPE html>

<html lang="en">

  <head>
    <title>ACE in Action</title>
    <style type="text/css" media="screen">
      #lesson {
        position:absolute;
        top:0;
        left:0;
        width:350px;
        height:100%;
        padding:15px;
      }

      #lessonText {
        padding-bottom:15px;
      }

      #editor {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 350px;
        width:400px;
      }

      iframe {
        position:absolute;
        top:0;
        left:750px;
        width:500px;
        height:100%;
      }

      #renderBtn {
        position:absolute;
        top:0;
        left:1250px;
      }

      #nextBtn {

      }

      #prevBtn {

      }
    </style>

    <script src="jquery-2.1.1.min.js" type="text/javascript"></script>
  </head>

  <body>

    <div id="lesson">
      <h1>Lesson Text</h1>

      <div id="lessonText"></div>

      <button id="prevBtn">Prev</button>
      <button id="nextBtn">Next</button>
    </div>

    <div id="editor">function foo(items) {
      var x = "All this is syntax highlighted";
      return x;
      }</div>

    <iframe id="renderFrame" src="about:blank"></iframe>

    <button id="renderBtn" onclick="render();">Render</button>

    <script src="./ace/ace-builds-master/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
    <script>
      var currentLessonNum = 0;
      var editor = null;

      var lessonSrcs = [];
      lessonSrcs.push("<html>\n  <head>\n    <title>Lesson 1</title>\n  </head>\n  <body>\n    <h1>Lesson 1</h1>\n  </body>\n</html>");
      lessonSrcs.push("<html>\n  <head>\n    <title>Lesson 2</title>\n  </head>\n  <body>\n    <h1>Lesson 2</h1>\n  </body>\n</html>");
      var lessonTexts = ['Lesson 1 text', 'Lesson 2 text'];

      function render() {
        $('#renderFrame').contents().find('html').html(editor.getValue());
      }

      function move(diff) {
        currentLessonNum += diff;
        if (currentLessonNum == lessonSrcs.length) {
          currentLessonNum = 0;
        } else if(currentLessonNum < 0) {
          currentLessonNum = lessonSrcs.length - 1;
        }

        $('#lessonText').html(lessonTexts[currentLessonNum]);
        editor.setValue(lessonSrcs[currentLessonNum]);
      }

      $('document').ready(function() {

        $('#prevBtn').click(function() {
          move(-1);
        });
        $('#nextBtn').click(function() {
          move(1);
        });

        editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.getSession().setMode("ace/mode/javascript");

        move(0);
      });
    </script>
  </body>
</html>
